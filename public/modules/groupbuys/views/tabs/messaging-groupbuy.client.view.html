<section data-ng-controller="GroupbuysTabMessagingController" data-ng-init="loadMessagesData()">
    <div class="panel panel-default">
        <div class="panel-body">

            <!-- Vista de participante -->
            <div data-ng-show="(userRole !== 'manager')">
                <form data-ng-submit="sendMessage()" name="MessagesForm" novalidate>

                    <!-- Conversacion -->
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div data-ng-repeat="message in messages track by $index">
                                <div class="col-md-12">
                                    <div ng-class="{'pull-left': message.from === selectedMember.username, 'pull-right': message.from !== selectedMember.username}">
                                        <div ng-class="{'alert-info': message.from === selectedMember.username, 'alert-success': message.from !== selectedMember.username}">
                                            <span>{{message.text}}</span>
                                        </div>
                                        <span>{{'groupbuys.Written_on' | translate}}: {{message.date | date:'d/M/yyyy H:mm:ss'}}</span>
                                        <span ng-if="message.from !== selectedMember.username">({{message.from}})</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Escribir -->
                            <textarea id="messageText" data-ng-model="messageText" name="messageText" class="form-control" rows="5" placeholder="Escribe algo..."></textarea>
                            <input type="submit" value="Enviar" class="btn btn-default">
                            <!-- FIN Escribir-->
                        </div>
                    </div>
                    <!-- FIN Conversacion-->

                </form>
            </div>
            <!-- FIN Vista de participante -->


            <!-- Vista de gestor -->
            <div data-ng-show="(userRole == 'manager')">

                <form data-ng-submit="sendMessage()" name="MessagesForm" novalidate>
                    <!-- Panel de informacion del pago -->

                            <div class="row">
                                <div class="col-md-3">
                                    <div>
                                        <div class="member {{selected}}" data-ng-repeat="member in groupbuy.members_extended_data track by $index" data-ng-click="selectDestMember(member);">
                                            <img class="img-responsive img-circle" ng-src="{{member.avatar}}?size=sm" fb-src="['/modules/users/img/no-user-image-square-sm.jpg']" alt="avatar" /><span>{{member.username}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-9">
                                    <!-- Conversacion -->
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div data-ng-repeat="message in messages track by $index">
                                                <div class="col-md-12">
                                                    <div ng-class="{'pull-left': message.from === selectedMember.username, 'pull-right': message.from !== selectedMember.username}">
                                                        <div ng-class="{'alert-info': message.from === selectedMember.username, 'alert-success': message.from !== selectedMember.username}">
                                                            <span>{{message.text}}</span>
                                                        </div>
                                                        <span>{{'groupbuys.Written_on' | translate}}: {{message.date | date:'d/M/yyyy H:mm:ss'}}</span>
                                                        <span ng-if="message.from !== selectedMember.username">({{message.from}})</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Escribir -->
                                            <textarea id="messageText" data-ng-model="messageText" name="messageText" class="form-control" rows="5" placeholder="Escribe algo..."></textarea>
                                            <input type="submit" value="Enviar" class="btn btn-default">
                                            <!-- FIN Escribir-->
                                        </div>
                                    </div>
                                    <!-- FIN Conversacion-->



                                </div>
                            </div>
                    <!-- FIN Panel de informacion del pago -->

                </form>
            </div>
            <!-- FIN Vista de gestor -->

          </div>
    </div>
<!--  FIN Panel de la pestaÃ±a -->

</section>
